if (!selectCurrency) var selectCurrency = "RUB"; if (!poolCurrency) var poolCurrency = {"RUB" : 1, "USD" : 1, "EUR" : 1, "UAH" : 1}; if (!poolCurrencySymbol) var poolCurrencySymbol = {"RUB" : "P", "USD" : "$", "EUR" : "€", "UAH" : "₴"}; function currencySelect(currency) {if (navigator.cookieEnabled) {if (currency) {if (poolCurrency[currency]) {if (selectCurrency != currency) {var selectCurrencyTemp = selectCurrency; selectCurrency = currency; DOMcurrencySelect(selectCurrencyTemp); var date = new Date(); date = date.getMonth() + 12; document.cookie = "currency=" + selectCurrency + ";expires=" + date + ";domain=.gabestore.ru;path=/"; updatePrices(); } } } } } function currencyList(){currencySelect(document.getElementById('currency-list').value); } function DOMcurrencySelect(last) {document.getElementById("currency_now").innerHTML = selectCurrency; var element = document.getElementById("currency_" + selectCurrency); element.classList.add("_active"); document.getElementById("currency-listall").className = "dropdown js-dropdown"; var element = document.getElementById("currency-list"); element.value = selectCurrency; if (last) {document.getElementById("currency_" + last).classList.remove("_active"); } } function updatePrices() {var element = document.getElementsByClassName("currencyPrice"); for (var i=0; i<element.length; i++) {if (!element[i].hasAttribute("currencysymbol") || element[i].getAttribute("currencysymbol") != selectCurrency) {if (!element[i].hasAttribute("currency")) {element[i].setAttribute("currency", element[i].innerHTML) } element[i].setAttribute("currencysymbol", selectCurrency); element[i].innerHTML = (element[i].getAttribute("currency") / poolCurrency[selectCurrency]); if (selectCurrency == "RUB") {element[i].innerHTML = element[i].getAttribute("currency"); } else if (selectCurrency == "UAH") {element[i].innerHTML = parseFloat(element[i].innerHTML).toFixed(0); } else {element[i].innerHTML = parseFloat(element[i].innerHTML).toFixed(2); } } } var element = document.getElementsByClassName("currencySymbol"); for (var i=0; i<element.length; i++) {if (!element[i].hasAttribute("currencysymbol") || element[i].getAttribute("currencysymbol") != selectCurrency) {element[i].setAttribute("currencysymbol", selectCurrency); if (selectCurrency == "RUB") {element[i].innerHTML = "<span class='rub'>" + poolCurrencySymbol[selectCurrency] + "</span>"; } else {element[i].innerHTML = poolCurrencySymbol[selectCurrency]; } } } } if (navigator.cookieEnabled) {document.addEventListener("DOMContentLoaded", function() {if (getCookie("currency")) {selectCurrency = getCookie("currency"); DOMcurrencySelect(); } else {DOMcurrencySelect(); } }); function getCookie(name) {var matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)")); return matches ? decodeURIComponent(matches[1]) : undefined; } } setInterval(updatePrices, 1000);